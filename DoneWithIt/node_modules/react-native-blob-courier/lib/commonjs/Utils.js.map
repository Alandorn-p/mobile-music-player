{"version":3,"names":["createUuidPart","Math","random","toString","substring","uuid","intersectObjects","primary","secondary","Set","Object","keys","concat","reduce","p","c","undefined","unionObjects","fallbackObjects","fallback","primaryAndFallbackUnified","allUniqueKeys","childWithFallback","convertMappedMultipartsWithSymbolizedKeysToArray","mappedParts","symbolKeys","getOwnPropertySymbols","map","symbolName","name","Symbol","keyFor","sanitizeMappedMultiparts","mapped","regularKeys","receivedRegularKeys","length","receivedSymbolKeys","receivedMixedKeys","receivedInvalidSymbols","filter","_","Error","for"],"sources":["Utils.tsx"],"sourcesContent":["/**\n * Copyright (c) Ely Deckers.\n *\n * This source code is licensed under the MPL-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport type { BlobNamedMultipartArray, BlobMultipart } from './ExposedTypes';\n\n// Taken from https://github.com/joltup/rn-fetch-blob/blob/master/utils/uuid.js\nconst createUuidPart = () => Math.random().toString(36).substring(2, 15);\n\nexport const uuid = () => `${createUuidPart()}${createUuidPart()}`;\n\nexport const intersectObjects = (\n  primary: { [key: string]: any },\n  secondary: { [key: string]: any }\n) =>\n  [...new Set(Object.keys(primary).concat(Object.keys(secondary)))].reduce(\n    (p, c) =>\n      c in primary && c in secondary\n        ? {\n            ...p,\n            [c]: primary[c] !== undefined ? primary[c] : secondary[c],\n          }\n        : p,\n    {}\n  ) as { [key: string]: any };\n\nexport const unionObjects = (\n  primary: { [key: string]: any },\n  secondary: { [key: string]: any }\n) =>\n  [...new Set(Object.keys(primary).concat(Object.keys(secondary)))].reduce(\n    (p, c) =>\n      c in primary && c in secondary\n        ? {\n            ...p,\n            [c]: primary[c] !== undefined ? primary[c] : secondary[c],\n          }\n        : {\n            ...p,\n            [c]: c in primary ? primary[c] : secondary[c],\n          },\n    {}\n  ) as { [key: string]: any };\n\nexport const fallbackObjects = (\n  primary: { [key: string]: any },\n  fallback: { [key: string]: any }\n): { [key: string]: any } => {\n  const primaryAndFallbackUnified = unionObjects(primary, fallback);\n\n  const allUniqueKeys = [...new Set(Object.keys(primaryAndFallbackUnified))];\n\n  return allUniqueKeys.reduce((p, c) => {\n    if (typeof fallback[c] === 'object') {\n      const childWithFallback = fallbackObjects(\n        typeof primary[c] === 'object' ? primary[c] : {}, // Fallback object is leading, so either primary is an object or we're ignoring it\n        fallback[c]\n      );\n\n      return {\n        ...p,\n        [c]: childWithFallback,\n      };\n    }\n\n    return {\n      ...p,\n      [c]: primary[c] !== undefined ? primary[c] : fallback[c],\n    };\n  }, {});\n};\n\nexport const convertMappedMultipartsWithSymbolizedKeysToArray = (mappedParts: {\n  [key: string]: BlobMultipart;\n}): BlobNamedMultipartArray => {\n  const symbolKeys = Object.getOwnPropertySymbols(mappedParts);\n\n  return symbolKeys.map((symbolName: any) => ({\n    ...mappedParts[symbolName],\n    name: Symbol.keyFor(symbolName) ?? '',\n  }));\n};\n\nexport const sanitizeMappedMultiparts = (mapped: {\n  [key: string]: BlobMultipart;\n}) => {\n  const regularKeys = Object.keys(mapped);\n  const symbolKeys = Object.getOwnPropertySymbols(mapped);\n\n  const receivedRegularKeys = regularKeys.length > 0;\n  const receivedSymbolKeys = symbolKeys.length > 0;\n\n  const receivedMixedKeys = receivedRegularKeys && receivedSymbolKeys;\n\n  const receivedInvalidSymbols =\n    receivedSymbolKeys &&\n    symbolKeys.map(Symbol.keyFor).filter((_) => _ === undefined).length > 0;\n\n  if (receivedMixedKeys) {\n    throw new Error('Either use all Symbols or all Strings as multipart keys');\n  }\n\n  if (receivedInvalidSymbols) {\n    throw new Error('Use Symbol.for when using Symbols as key for multiparts');\n  }\n\n  return regularKeys.length > 0\n    ? regularKeys.reduce(\n        (p, c) => ({\n          ...p,\n          [Symbol.for(c)]: mapped[c],\n        }),\n        {}\n      )\n    : mapped;\n};\n"],"mappings":"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"}